<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to right, #0e8335, #000000);
            height: 100vh;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
        }

        .auth-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            width: 400px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .logo {
            width: 60px;
            height: 60px;
            background-color: #8BC34A;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 20px;
        }

        .logo img {
            width: 40px;
            height: 40px;
        }

        h2 {
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 15px;
            text-align: left;
            position: relative;
        }

        .input-group input {
            width: 100%;
            padding: 10px 30px 10px 30px;
            border: none;
            border-bottom: 1px solid #ddd;
            font-size: 16px;
            box-sizing: border-box;
            outline: none;
        }

        .input-group i {
            position: absolute;
            left: 5px;
            top: 12px;
            color: #555;
        }

        .auth-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 12px;
            width: 100%;
            font-size: 16px;
            margin-top: 10px;
            cursor: pointer;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 20px 0;
            color: #666;
        }

        .divider::before, .divider::after {
            content: "";
            flex: 1;
            border-bottom: 1px solid #ddd;
        }

        .divider span {
            padding: 0 10px;
        }

        .social-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .social-button {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 50px;
            height: 50px;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-size: 24px;
            color: #00C853;
            cursor: pointer;
        }

        .footer-text {
            margin-top: 20px;
        }

        .footer-text a {
            color: #4CAF50;
            text-decoration: none;
            font-weight: bold;
        }

        .nav-bar {
            background-color: #333;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            font-size: 20px;
            font-weight: bold;
        }

        .nav-button {
            background-color: transparent;
            border: 1px solid white;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
        }

        .dashboard {
            max-width: 1200px;
            margin: 40px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .recover-link {
            display: block;
            text-align: right;
            margin-bottom: 15px;
            color: #4CAF50;
            text-decoration: none;
        }

        .message {
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 4px;
            display: none;
        }

        .error {
            background-color: #ebebeb;
            color: #D32F2F;
        }

        .success {
            background-color: #fdfdfd;
            color: #388E3C;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="nav-bar">
        <div class="nav-brand">My Dashboard</div>
        <button class="nav-button" id="navAuthButton">SIGN IN</button>
    </div>

    <!-- Dashboard Content (initially hidden) -->
    <div class="dashboard" id="dashboardContent">
        <h2>Welcome to your Dashboard</h2>
        <p>This is your dashboard content. You are now logged in.</p>
        <button class="auth-button" id="signOutButton">Sign Out</button>
    </div>

    <!-- Authentication Container (Sign In / Register) -->
    <div class="container" id="authContainer">
        <!-- Sign In Form -->
        <div class="auth-card" id="signInForm">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px">
                    <path d="M0 0h24v24H0z" fill="none"/>
                    <path d="M12 2C6.48 2
                 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
            </div>
            <h2>Sign In</h2>
            <div id="signInMessage" class="message"></div>
            <div class="input-group">
                <i>‚úâÔ∏è</i>
                <input type="email" id="signInEmail" placeholder="Email">
            </div>
            <div class="input-group">
                <i>üîí</i>
                <input type="password" id="signInPassword" placeholder="Password">
            </div>
            <a href="#" class="recover-link" id="recoverPassword">Recover Password</a>
            <button class="auth-button" id="signInButton">Sign In</button>
            <div class="divider">
                <span>or</span>
            </div>
            <div class="social-buttons">
                <div class="social-button" id="googleSignIn">G</div>
                <div class="social-button" id="facebookSignIn">f</div>
            </div>
            <div class="footer-text">
                Don't have an account yet? <a href="#" id="showRegister">Sign Up</a>
            </div>
        </div>

        <!-- Register Form -->
        <div class="auth-card" id="registerForm" style="display: none;">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px">
                    <path d="M0 0h24v24H0z" fill="none"/>
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
            </div>
            <h2>Register</h2>
            <div id="registerMessage" class="message"></div>
            <div class="input-group">
                <i>üë§</i>
                <input type="text" id="firstName" placeholder="First Name">
            </div>
            <div class="input-group">
                <i>üë§</i>
                <input type="text" id="lastName" placeholder="Last Name">
            </div>
            <div class="input-group">
                <i>‚úâÔ∏è</i>
                <input type="email" id="registerEmail" placeholder="Email">
            </div>
            <div class="input-group">
                <i>üîí</i>
                <input type="password" id="registerPassword" placeholder="Password">
            </div>
            <button class="auth-button" id="registerButton">Sign Up</button>
            <div class="divider">
                <span>or</span>
            </div>
            <div class="social-buttons">
                <div class="social-button" id="googleRegister">G</div>
                <div class="social-button" id="facebookRegister">f</div>
            </div>
            <div class="footer-text">
                Already have an account? <a href="#" id="showSignIn">Sign In</a>
            </div>
        </div>

        <!-- Password Recovery Form -->
        <div class="auth-card" id="recoverForm" style="display: none;">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px">
                    <path d="M0 0h24v24H0z" fill="none"/>
                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                </svg>
            </div>
            <h2>Recover Password</h2>
            <div id="recoverMessage" class="message"></div>
            <p>Enter your email address to receive a password reset link.</p>
            <div class="input-group">
                <i>‚úâÔ∏è</i>
                <input type="email" id="recoverEmail" placeholder="Email">
            </div>
            <button class="auth-button" id="sendRecoveryEmailButton">Send Recovery Email</button>
            <div class="footer-text">
                <a href="#" id="backToSignIn">Back to Sign In</a>
            </div>
        </div>
    </div>

    <!-- Firebase SDK scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        // Firebase configuration - Replace with your config
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // DOM elements
        const authContainer = document.getElementById('authContainer');
        const dashboardContent = document.getElementById('dashboardContent');
        const navAuthButton = document.getElementById('navAuthButton');
        const signOutButton = document.getElementById('signOutButton');
        
        const signInForm = document.getElementById('signInForm');
        const registerForm = document.getElementById('registerForm');
        const recoverForm = document.getElementById('recoverForm');
        
        const showRegister = document.getElementById('showRegister');
        const showSignIn = document.getElementById('showSignIn');
        const recoverPassword = document.getElementById('recoverPassword');
        const backToSignIn = document.getElementById('backToSignIn');
        
        const signInButton = document.getElementById('signInButton');
        const registerButton = document.getElementById('registerButton');
        const sendRecoveryEmailButton = document.getElementById('sendRecoveryEmailButton');
        
        const googleSignIn = document.getElementById('googleSignIn');
        const facebookSignIn = document.getElementById('facebookSignIn');
        const googleRegister = document.getElementById('googleRegister');
        const facebookRegister = document.getElementById('facebookRegister');
        
        const signInMessage = document.getElementById('signInMessage');
        const registerMessage = document.getElementById('registerMessage');
        const recoverMessage = document.getElementById('recoverMessage');

        // Check if user is already logged in
        auth.onAuthStateChanged(user => {
            if (user) {
                // User is signed in
                authContainer.style.display = 'none';
                dashboardContent.style.display = 'block';
                navAuthButton.textContent = 'SIGN OUT';
            } else {
                // User is signed out
                authContainer.style.display = 'flex';
                dashboardContent.style.display = 'none';
                navAuthButton.textContent = 'SIGN IN';
            }
        });

        // Show message function
        function showMessage(element, message, type) {
            element.textContent = message;
            element.className = `message ${type}`;
            element.style.display = 'block';
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }

        // Form toggle functions
        showRegister.addEventListener('click', () => {
            signInForm.style.display = 'none';
            registerForm.style.display = 'block';
            recoverForm.style.display = 'none';
        });

        showSignIn.addEventListener('click', () => {
            signInForm.style.display = 'block';
            registerForm.style.display = 'none';
            recoverForm.style.display = 'none';
        });

        recoverPassword.addEventListener('click', () => {
            signInForm.style.display = 'none';
            registerForm.style.display = 'none';
            recoverForm.style.display = 'block';
        });

        backToSignIn.addEventListener('click', () => {
            signInForm.style.display = 'block';
            registerForm.style.display = 'none';
            recoverForm.style.display = 'none';
        });

        // Navigation button toggle
        navAuthButton.addEventListener('click', () => {
            if (navAuthButton.textContent === 'SIGN OUT') {
                // Sign out user
                auth.signOut().then(() => {
                    // Sign-out successful.
                    authContainer.style.display = 'flex';
                    dashboardContent.style.display = 'none';
                    navAuthButton.textContent = 'SIGN IN';
                }).catch((error) => {
                    // An error happened.
                    console.error('Sign out error:', error);
                });
            } else {
                // Switch to sign in form
                signInForm.style.display = 'block';
                registerForm.style.display = 'none';
                recoverForm.style.display = 'none';
            }
        });

        // Sign out button
        signOutButton.addEventListener('click', () => {
            auth.signOut().then(() => {
                // Sign-out successful.
                authContainer.style.display = 'flex';
                dashboardContent.style.display = 'none';
                navAuthButton.textContent = 'SIGN IN';
            }).catch((error) => {
                // An error happened.
                console.error('Sign out error:', error);
            });
        });

        // Sign In functionality
        signInButton.addEventListener('click', () => {
            const email = document.getElementById('signInEmail').value;
            const password = document.getElementById('signInPassword').value;

            if (!email || !password) {
                showMessage(signInMessage, 'Please fill in all fields', 'error');
                return;
            }

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Signed in
                    const user = userCredential.user;
                    showMessage(signInMessage, 'Successfully signed in!', 'success');
                    setTimeout(() => {
                        authContainer.style.display = 'none';
                        dashboardContent.style.display = 'block';
                        navAuthButton.textContent = 'SIGN OUT';
                    }, 1000);
                })
                .catch((error) => {
                    const errorMessage = error.message;
                    showMessage(signInMessage, errorMessage, 'error');
                });
        });

        // Register functionality
        registerButton.addEventListener('click', () => {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;

            if (!firstName || !lastName || !email || !password) {
                showMessage(registerMessage, 'Please fill in all fields', 'error');
                return;
            }

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Signed up
                    const user = userCredential.user;
                    
                    // Store additional user info in Firestore
                    return db.collection('users').doc(user.uid).set({
                        firstName: firstName,
                        lastName: lastName,
                        email: email,
                        createdAt: new Date()
                    }).then(() => {
                        showMessage(registerMessage, 'Account created successfully!', 'success');
                        setTimeout(() => {
                            authContainer.style.display = 'none';
                            dashboardContent.style.display = 'block';
                            navAuthButton.textContent = 'SIGN OUT';
                        }, 1000);
                    });
                })
                .catch((error) => {
                    const errorMessage = error.message;
                    showMessage(registerMessage, errorMessage, 'error');
                });
        });

        // Password recovery functionality
        sendRecoveryEmailButton.addEventListener('click', () => {
            const email = document.getElementById('recoverEmail').value;

            if (!email) {
                showMessage(recoverMessage, 'Please enter an email address', 'error');
                return;
            }

            auth.sendPasswordResetEmail(email)
                .then(() => {
                    showMessage(recoverMessage, 'Password reset email sent!', 'success');
                    setTimeout(() => {
                        signInForm.style.display = 'block';
                        recoverForm.style.display = 'none';
                    }, 3000);
                })
                .catch((error) => {
                    const errorMessage = error.message;
                    showMessage(recoverMessage, errorMessage, 'error');
                });
        });

        // Google Sign In
        googleSignIn.addEventListener('click', () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    // Check if this is a new user
                    const isNewUser = result.additionalUserInfo.isNewUser;
                    if (isNewUser) {
                        // Store user info in Firestore
                        return db.collection('users').doc(result.user.uid).set({
                            firstName: result.user.displayName.split(' ')[0] || '',
                            lastName: result.user.displayName.split(' ')[1] || '',
                            email: result.user.email,
                            createdAt: new Date()
                        });
                    }
                })
                .catch((error) => {
                    showMessage(signInMessage, error.message, 'error');
                });
        });

        // Facebook Sign In
        facebookSignIn.addEventListener('click', () => {
            const provider = new firebase.auth.FacebookAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    // Check if this is a new user
                    const isNewUser = result.additionalUserInfo.isNewUser;
                    if (isNewUser) {
                        // Store user info in Firestore
                        return db.collection('users').doc(result.user.uid).set({
                            firstName: result.user.displayName.split(' ')[0] || '',
                            lastName: result.user.displayName.split(' ')[1] || '',
                            email: result.user.email,
                            createdAt: new Date()
                        });
                    }
                })
                .catch((error) => {
                    showMessage(signInMessage, error.message, 'error');
                });
        });

        // Google Register (same as sign in but clearer UX)
        googleRegister.addEventListener('click', () => {
            googleSignIn.click();
        });

        // Facebook Register (same as sign in but clearer UX)
        facebookRegister.addEventListener('click', () => {
            facebookSignIn.click();
        });
    </script>
</body>
</html>